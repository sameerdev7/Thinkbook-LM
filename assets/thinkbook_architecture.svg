<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="900" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="700" y="50" font-family="Arial, sans-serif" font-size="32" font-weight="bold" text-anchor="middle" fill="#0f172a">
    ThinkbookLM System Architecture
  </text>
  
  <!-- Layer 1: Input Sources -->
  <g id="input-sources">
    <rect x="50" y="100" width="250" height="350" rx="10" fill="#e0e7ff" stroke="#4f46e5" stroke-width="3"/>
    <text x="175" y="135" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Input Sources
    </text>
    
    <rect x="75" y="160" width="200" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="175" y="190" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      PDF Documents
    </text>
    
    <rect x="75" y="220" width="200" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="175" y="250" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      Text Files (TXT, MD)
    </text>
    
    <rect x="75" y="280" width="200" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="175" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      Audio Files
    </text>
    
    <rect x="75" y="340" width="200" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="175" y="370" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      YouTube Videos
    </text>
    
    <rect x="75" y="400" width="200" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="175" y="430" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      Web Pages
    </text>
  </g>
  
  <!-- Layer 2: Processing Pipeline -->
  <g id="processing">
    <rect x="370" y="100" width="280" height="350" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
    <text x="510" y="135" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Processing Pipeline
    </text>
    
    <rect x="395" y="160" width="230" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="510" y="185" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Document Processor
    </text>
    <text x="510" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      PyMuPDF Parser
    </text>
    
    <rect x="395" y="230" width="230" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="510" y="255" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Audio Transcriber
    </text>
    <text x="510" y="275" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      AssemblyAI + Diarization
    </text>
    
    <rect x="395" y="300" width="230" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="510" y="325" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Web Scraper
    </text>
    <text x="510" y="345" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Firecrawl Extractor
    </text>
    
    <rect x="395" y="370" width="230" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="510" y="395" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Text Chunking
    </text>
    <text x="510" y="415" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Overlap Strategy + Metadata
    </text>
  </g>
  
  <!-- Layer 3: Embedding -->
  <g id="embedding">
    <rect x="720" y="100" width="240" height="160" rx="10" fill="#dbeafe" stroke="#0284c7" stroke-width="3"/>
    <text x="840" y="135" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Embedding Layer
    </text>
    
    <rect x="745" y="160" width="190" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="840" y="190" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Vector Generation
    </text>
    <text x="840" y="210" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      FastEmbed
    </text>
    <text x="840" y="227" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      bge-small-en-v1.5 (384d)
    </text>
  </g>
  
  <!-- Layer 4: Vector Storage -->
  <g id="storage">
    <rect x="720" y="290" width="240" height="160" rx="10" fill="#e9d5ff" stroke="#9333ea" stroke-width="3"/>
    <text x="840" y="325" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Vector Storage
    </text>
    
    <rect x="745" y="350" width="190" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="840" y="380" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Milvus Database
    </text>
    <text x="840" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      IVF Indexing
    </text>
    <text x="840" y="417" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Semantic Search
    </text>
  </g>
  
  <!-- Layer 5: Query & Response -->
  <g id="query-response">
    <rect x="1030" y="100" width="320" height="350" rx="10" fill="#fce7f3" stroke="#db2777" stroke-width="3"/>
    <text x="1190" y="135" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Query & Response
    </text>
    
    <rect x="1055" y="160" width="270" height="50" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1190" y="190" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#334155">
      User Query Input
    </text>
    
    <rect x="1055" y="220" width="270" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1190" y="245" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Semantic Retrieval
    </text>
    <text x="1190" y="265" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Top-K Relevant Chunks
    </text>
    
    <rect x="1055" y="290" width="270" height="60" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1190" y="315" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      RAG Generator
    </text>
    <text x="1190" y="335" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      GPT-4 with Citations
    </text>
    
    <rect x="1055" y="360" width="270" height="70" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1190" y="385" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Cited Response Output
    </text>
    <text x="1190" y="405" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Source References
    </text>
    <text x="1190" y="420" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Page Numbers + Metadata
    </text>
  </g>
  
  <!-- Layer 6: Memory -->
  <g id="memory">
    <rect x="370" y="510" width="590" height="160" rx="10" fill="#d1fae5" stroke="#059669" stroke-width="3"/>
    <text x="665" y="545" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Conversational Memory Layer
    </text>
    
    <rect x="395" y="570" width="260" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="525" y="600" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Temporal Knowledge Graph
    </text>
    <text x="525" y="620" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Zep Memory System
    </text>
    <text x="525" y="637" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Context + User Preferences
    </text>
    
    <rect x="675" y="570" width="260" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="805" y="600" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Session Management
    </text>
    <text x="805" y="620" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Conversation History
    </text>
    <text x="805" y="637" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Document Usage Tracking
    </text>
  </g>
  
  <!-- Layer 7: Podcast Studio -->
  <g id="podcast">
    <rect x="1030" y="510" width="320" height="160" rx="10" fill="#fed7aa" stroke="#ea580c" stroke-width="3"/>
    <text x="1190" y="545" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Podcast Studio
    </text>
    
    <rect x="1055" y="570" width="140" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1125" y="600" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#334155">
      Script Generator
    </text>
    <text x="1125" y="620" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#64748b">
      GPT-4 Dialogue
    </text>
    <text x="1125" y="637" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#64748b">
      Creation
    </text>
    
    <rect x="1210" y="570" width="140" height="80" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1280" y="600" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#334155">
      TTS Engine
    </text>
    <text x="1280" y="620" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#64748b">
      Kokoro
    </text>
    <text x="1280" y="637" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#64748b">
      Multi-Speaker Audio
    </text>
  </g>
  
  <!-- Layer 8: User Interface -->
  <g id="ui">
    <rect x="50" y="730" width="1300" height="130" rx="10" fill="#ede9fe" stroke="#7c3aed" stroke-width="3"/>
    <text x="700" y="765" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      User Interface - Streamlit Web Application
    </text>
    
    <rect x="90" y="790" width="370" height="55" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="275" y="815" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Document Library Tab
    </text>
    <text x="275" y="833" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Upload, Management, Source Viewing
    </text>
    
    <rect x="515" y="790" width="370" height="55" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="700" y="815" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Research Chat Tab
    </text>
    <text x="700" y="833" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Interactive Q&A with Citation Tooltips
    </text>
    
    <rect x="940" y="790" width="370" height="55" rx="8" fill="#ffffff" stroke="#94a3b8" stroke-width="2"/>
    <text x="1125" y="815" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#334155">
      Creative Studio Tab
    </text>
    <text x="1125" y="833" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      AI Podcast Generation Interface
    </text>
  </g>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto">
      <polygon points="0 0, 12 6, 0 12" fill="#475569"/>
    </marker>
    <marker id="arrow-dashed" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto">
      <polygon points="0 0, 12 6, 0 12" fill="#94a3b8"/>
    </marker>
  </defs>
  
  <!-- Input to Processing -->
  <line x1="300" y1="275" x2="370" y2="275" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Processing to Embedding -->
  <line x1="650" y1="230" x2="720" y2="200" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Embedding to Storage -->
  <line x1="840" y1="260" x2="840" y2="290" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Storage to Query -->
  <line x1="960" y1="370" x2="1030" y2="280" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Query to Memory (bidirectional) -->
  <path d="M 1100 450 Q 1000 480 850 510" stroke="#475569" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Memory to Query -->
  <path d="M 750 510 Q 900 480 1050 450" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow-dashed)"/>
  
  <!-- Processing to Podcast (optional) -->
  <path d="M 650 380 Q 850 450 1030 590" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow-dashed)"/>
  
  <!-- Memory to UI -->
  <line x1="665" y1="670" x2="525" y2="730" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Query to UI -->
  <line x1="1190" y1="450" x2="1125" y2="730" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Podcast to UI -->
  <line x1="1190" y1="670" x2="1190" y2="730" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="880" width="200" height="10" fill="none"/>
    <line x1="50" y1="885" x2="100" y2="885" stroke="#475569" stroke-width="3" marker-end="url(#arrow)"/>
    <text x="110" y="890" font-family="Arial, sans-serif" font-size="12" fill="#334155">
      Primary Data Flow
    </text>
    
    <line x1="250" y1="885" x2="300" y2="885" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow-dashed)"/>
    <text x="310" y="890" font-family="Arial, sans-serif" font-size="12" fill="#334155">
      Optional/Return Path
    </text>
  </g>
</svg>